---
title: OS overview
date: 2017-12-05 18:49:13
tags:
	- OS
	- Note
categories: OS
---

# OS overview
&emsp;&emsp;今天开始学操作系统！虽然我不会汇编也不会计算机组成原理，「放弃吧，要有先修知识的」虽然冥利这么告诉我了，但是好奇嘛……忍不住想早一点了解。于是，决定在看视屏学习的时候即时记录笔记，就是这个系列啦！希望能够学好操作系统呢！

<!-- more -->

## Reference
>《操作系统概念(第七版)》—— Silberschatz, Galvin, Gange著，郑扣根译。高等教育出版社，2010年。
《操作系统——精髓与设计原理(第七版)》——William Stallings著，陈向群、陈渝译。电子工业出版社，2012年。

## Preparation
1. Computer composition principle
2. C language and Assembly design
3. Data structure

## Outline
1. 操作系统结构
 - 结构特点
2. 中断及系统调用
 - 中断：操作系统与硬件的接口
 - 系统调用：操作系统对上层应用提供的服务接口
3. 内存管理
 - 管理内存资源
4. 进程及线程
 - 管理程序的执行过程，维护正在执行的程序的状态
5. 处理机调度
 - 进程对CPU使用权的调度
6. 同步互斥
 - 不同进程的通信
7. 文件系统
 - 文件的读写查找
8. I/O子系统
 - 管理外部设备

## 什么是操作系统？
### 定义
1. 控制程序
 1.1 一个系统软件
 1.2 控制程序执行过程，防止错误和计算机的不当使用
 1.3 执行用户程序，给用户提供各种服务
 1.4 方便用户使用计算机系统

2. 资源管理器
 2.1 应用程序与硬件之间的中简层
 2.2 管理各种计算机软硬件资源
 2.3 提供访问计算机软硬件资源的高效手段
 2.4 解决资源访问冲突，确保资源公平使用

### 体系
!["Computer system"](./images/Computer_system0.png)
!["Computer system"](./images/Computer_system1.png)
!["Computer system"](./images/Computer_system2.png)

### 组成
- Shell——命令行接口
 + 通过键盘操纵
 + 方便用户进行命令输入
- GUI——图形用户接口
 + WIMP(Window, Icon, Menu, Pointer)
 + 直接操作和所见即所得
- Kernel——内核
 + 执行克重资源管理等功能

### 特征

- 并发
 + 计算机中同时存在多个运行的程序，需要OS管理和调度
- 共享
 + 宏观：同时
 + 微观：互斥
- 虚拟
 + 利用多道程序设计，让每个用户都觉得有一个计算机专门为他服务
- 异步
 + 程序的执行不是一贯到底，而是走走停停，向前推进的速度不可预知
 + 只要运行环境相同，OS需要保证程序运行的结果也要相同
- 其他特征
 + 微内核结构
 + 宏(单)内核结构
 + 多线
 + 堆成多处理机分布式操作系统
 + 面向对象设计
 
### 功能部件

- 进程管理 Process Management
- 主存管理 Main Memory Management
- 文件管理 File Management
- I/O系统管理 I/O System Management 
- 二级储存器管理 Secondary Management
- 网络处理 Networking
- 保护系统 Protection System
- 命令解释系统 Command Interpreter System

### History

1. 单用户系统
2. 批处理系统
3. 多程序系统
4. 分时系统——CPU性能提高到极致
5. 个人计算机
6. 分布式计算机
7. 云
8. ...

## 中断

&emsp;&emsp;中断是指CPU对系统中发生的异步事件的响应，异步事件是指无一定时序关系的随机发生的时间。
&emsp;&emsp; - 中断断点——发生中断时正在执行的程序的暂停点
&emsp;&emsp; - 中断响应——处理器暂停当前程序转而处理中断的过程
&emsp;&emsp; - 中断返回——中断处理借宿之后回复原来程序的执行
&emsp;&emsp; - 中断字——一个计算机提供的中断源的有序集合，这是一个逻辑结构，早不同的处理器有不相同的实现方式

### 分类

1. 硬件中断
2. 软件中断(异常)
- 程序中断
>定点操作数溢出，地址越界，虚存管理中缺页等

- 访管中断(trap陷入)
>用户程序在运行中亲求操作系统为其提供服务而执行一条“访管指令”所引起的中断，油层软件中断，系统调用。访管中断是进程所期待的，它是主动发起的中断，其他几种中断不是运行进程所期望的，属于强迫性中断事件。

现代操作系统是中断驱动的。

## 指令

- 特权指令——不允许用户程序中直接使用的指令
&emsp;&emsp; eg: I/O指令、设置时钟、设置控制寄存器
- 非特权指令——用户程序中所使用的指令

## 运行状态

- 用户态(User mode): 执行用户程序时的状态
 + 能够访问所有系统资源，可以指习惯特权指令，可以直接操作和管理硬件设备
 + 操作系统内核程序运行在内核态下
 + 使用内核栈
- 内核态(Kernel mode): 执行操作系统程序时(又称管态、核心态、系统态、特权模式)
 + 只能访问属于它的存储空间和普通寄存器，只能执行普通指令
 + 用户程序以及操作系统核外程序运行在用户态下
 + 使用用户栈